# Image Functions

Functions for loading and rendering images.

All functions documented here have been verified against the source code.

---

## Image Loading

### loadImage

Load an image from a URL and associate it with an ID for later drawing.

**Next-Gen API:**
```lua
loadImage(imageId, url)
```

| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| imageId | string | Yes | Unique identifier for this image |
| url | string | Yes | URL of the image to load |

**Example:**
```lua
-- Load images during initialization
loadImage("player", "/plugins/my-plugin/player.png")
loadImage("enemy", "/plugins/my-plugin/enemy.png")

-- Later, draw them
drawImage("player", 100, 100, 32, 32)
drawImage("enemy", 200, 100, 32, 32)
```

**Source:** `core/next-gen-plugin-runtime.ts:237-248`

---

### preloadImage

Preload an image from a URL. Returns a Promise that resolves when the image is loaded.

**API:**
```lua
preloadImage(imageUrl)
```

| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| imageUrl | string | Yes | URL of the image to preload |

**Returns:** `Promise<void>` - Resolves when image is loaded

**Source:** `types/plugin.ts:101`

---

## Image Drawing

### drawImage (Next-Gen - Unified)

Draw an image with optional transforms. This is a unified function that supports all image operations.

**Next-Gen API:**
```lua
drawImage(imageId, x, y, width?, height?, alpha?, angle?, sourceX?, sourceY?, sourceWidth?, sourceHeight?, centerX?, centerY?)
```

| Parameter | Type | Required | Default | Description |
|-----------|------|----------|---------|-------------|
| imageId | string | Yes | - | Image ID (from loadImage) |
| x | number | Yes | - | X position to draw at |
| y | number | Yes | - | Y position to draw at |
| width | number | No | original | Width to draw |
| height | number | No | original | Height to draw |
| alpha | number | No | 1.0 | Transparency (0.0-1.0) |
| angle | number | No | 0 | Rotation angle in radians |
| sourceX | number | No | 0 | Source X for cropping |
| sourceY | number | No | 0 | Source Y for cropping |
| sourceWidth | number | No | full | Source width for cropping |
| sourceHeight | number | No | full | Source height for cropping |
| centerX | number | No | width/2 | Rotation center X |
| centerY | number | No | height/2 | Rotation center Y |

**Example:**
```lua
-- Simple draw
drawImage("player", 100, 100)

-- Draw with size
drawImage("player", 100, 100, 64, 64)

-- Draw with transparency
drawImage("player", 100, 100, 64, 64, 0.5)

-- Draw rotated (45 degrees)
drawImage("player", 100, 100, 64, 64, 1.0, math.pi / 4)

-- Draw a portion of a spritesheet
drawImage("tileset", 100, 100, 32, 32, 1.0, 0, 0, 0, 32, 32)
```

**Source:** `core/next-gen-plugin-runtime.ts:252-281`

---

### drawImage (Legacy)

Draw an image at a position with optional size.

**Legacy API:**
```lua
drawImage(widgetId, imageUrl, x, y, width?, height?)
```

| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| widgetId | string | Yes | Target widget ID |
| imageUrl | string | Yes | URL of the image |
| x | number | Yes | X position |
| y | number | Yes | Y position |
| width | number | No | Original width |
| height | number | No | Original height |

**Source:** `types/plugin.ts:97`

---

### drawImageAlpha

Draw an image with alpha transparency and optional tint color.

**Legacy API:**
```lua
drawImageAlpha(widgetId, imageUrl, x, y, width, height, alpha, tintColor?)
```

| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| widgetId | string | Yes | Target widget ID |
| imageUrl | string | Yes | URL of the image |
| x | number | Yes | X position |
| y | number | Yes | Y position |
| width | number | Yes | Draw width |
| height | number | Yes | Draw height |
| alpha | number | Yes | Transparency (0.0-1.0) |
| tintColor | string | No | Color to tint the image |

**Source:** `types/plugin.ts:98`

---

### drawImagePart

Draw a portion of an image (useful for spritesheets and tile maps).

**Legacy API:**
```lua
drawImagePart(widgetId, imageUrl, destX, destY, destWidth, destHeight, srcX, srcY, srcWidth, srcHeight)
```

| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| widgetId | string | Yes | Target widget ID |
| imageUrl | string | Yes | URL of the image |
| destX | number | Yes | Destination X position |
| destY | number | Yes | Destination Y position |
| destWidth | number | Yes | Destination width |
| destHeight | number | Yes | Destination height |
| srcX | number | Yes | Source X in image |
| srcY | number | Yes | Source Y in image |
| srcWidth | number | Yes | Source width to copy |
| srcHeight | number | Yes | Source height to copy |

**Source:** `types/plugin.ts:99`

---

### drawImageRotated

Draw an image rotated by a specified angle.

**Legacy API:**
```lua
drawImageRotated(widgetId, imageUrl, x, y, width, height, angle, centerX?, centerY?)
```

| Parameter | Type | Required | Default | Description |
|-----------|------|----------|---------|-------------|
| widgetId | string | Yes | - | Target widget ID |
| imageUrl | string | Yes | - | URL of the image |
| x | number | Yes | - | X position |
| y | number | Yes | - | Y position |
| width | number | Yes | - | Draw width |
| height | number | Yes | - | Draw height |
| angle | number | Yes | - | Rotation angle in radians |
| centerX | number | No | width/2 | Rotation center X (relative to image) |
| centerY | number | No | height/2 | Rotation center Y (relative to image) |

**Source:** `types/plugin.ts:100`
