# API Reference

This section contains the complete API reference for MudForge plugin development.

## Categories

- **[Drawing Functions](/docs/api-reference/drawing-functions)** - Shapes, gradients, canvas operations
- **[Text Functions](/docs/api-reference/text-functions)** - Text rendering, fonts, ANSI colors
- **[Image Functions](/docs/api-reference/image-functions)** - Image loading and rendering
- **[Widget Functions](/docs/api-reference/widget-functions)** - Widget lifecycle and management
- **[MUD Interaction](/docs/api-reference/mud-functions)** - Sending commands, echoing text
- **[Triggers, Aliases & Timers](/docs/api-reference/trigger-alias-timer)** - Automation
- **[Variables & Persistence](/docs/api-reference/variable-persistence)** - Data storage
- **[Protocol Functions](/docs/api-reference/protocol-functions)** - GMCP and MSDP access
- **[Multi-Session Functions](/docs/api-reference/session-functions)** - Cross-session operations
- **[Utility Functions](/docs/api-reference/utility-functions)** - Helpers and utilities
- **[Lua Standard Libraries](/docs/api-reference/lua-libraries)** - table, math, string, os, io

## Getting Started

To use the plugin API, create a Lua file in the plugins directory:

```lua
local plugin = {}

function plugin.onLoad()
  -- Plugin initialization code
  echo("Plugin loaded!", "#00ff00")
end

function plugin.onUnload()
  -- Cleanup code
end

return plugin
```

### Drawing on Widgets

Canvas widgets automatically become active when created. Just create and draw:

```lua
local myWidget = createWidget({
  type = "canvas",
  title = "My Widget",
  width = 400,
  height = 300
})

-- Draw immediately - widget is already active!
drawRect(0, 0, 400, 300, "#1a1a2e")
drawText("Hello World!", 10, 20, "#ffffff")
```

Use `setActiveWidget()` only when switching between multiple widgets.

### Responding to MUD Output

Use triggers to react to text from the MUD:

```lua
addTrigger("HP: (\\d+)/(\\d+)", function(line, matches)
  local hp = tonumber(matches[1])
  local maxHp = tonumber(matches[2])
  if hp < maxHp * 0.3 then
    send("drink healing potion")
  end
end, { type = "regex" })
```
